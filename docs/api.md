<!---
  SPDX-FileCopyrightText: (C) 2025 Intel Corporation
  SPDX-License-Identifier: Apache-2.0
-->
# REST API
## API Location
The API design is guided by the architectural guidelines in the architecture document. 
The API is located under [REST API specification](../api/spec/openapi.yaml) 

## API Generation 
We use the Buf tool to generate the REST API specification leveraging several 
plugins to streamline the process. These plugins include go 
for Go code generation, go-grpc for gRPC services, kollalabs for OpenAPI v3 specifications, grpc-gateway for RESTful APIs, validate for schema validation, and doc for generating documentation. 


## API Code Generation and Implementation

The implementation of mapping the API back to the gRPC implementation is realized through code generated by the [grpc-gateway] tool. The process involves the following steps:

1. **Protobuf Definitions**:
    - The protobuf definitions of the catalog API are located under [Catalog Protobuf Spec].

2. **Code Generation**:
    - The generated code includes the gRPC server and client code.
    - The grpc-gateway tool generates code for converting incoming HTTP requests into gRPC requests and sending the responses back to the client.
    - Run the following command to generate the necessary code:
      ```bash
      make proto-generate
      ```
    - This command will generate the gRPC server and client code, the OpenAPI spec, and the REST client.
    - The generated code is located in the [API Generated Code] directory.

3. **Manual Linking**:
    - The linking between the gRPC method calls and the database calls is not autogenerated and has to be updated by hand.

[Catalog Protobuf Spec]: ../api/catalog/v3
[API Generated Code]: ../pkg/api
[grpc-gateway]: https://grpc-ecosystem.github.io/grpc-gateway/


### Steps to Generate Code

[Catalog Protobuf Spec]: ../api/catalog/v3
[API Generated Code]: ../pkg/api



[grpc-gateway]: https://grpc-ecosystem.github.io/grpc-gateway/
[Catalog Protobuf Spec]: ../api/catalog/v3
[API Generated Code]: ../pkg/api

[grpc-gateway]: https://grpc-ecosystem.github.io/grpc-gateway/
[Catalog Protobuf Spec]: ../api/catalog/v3
[API Generated Code]: ../pkg/api